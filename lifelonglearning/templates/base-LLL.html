{% load sekizai_tags staticfiles %}

<!DOCTYPE html>
<html lang="fi">
	<head>
		  <meta charset="utf-8">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta name="viewport" content="width=device-width, initial-scale=1">
      <title>{% block title %}Prodeko - Lifelong Learning Project{% endblock %}</title>
      {% include "snippets/ga-head.html" %}

			{% render_block "custom-css" %}
			{% render_block "custom-js" %}
	</head>

	<body>
    {% include "snippets/ga-body.html" %}
		{% block body %}

		<div id="scrollToTop">
		  <i class="fas fa-angle-double-up"></i>
		</div>

		{% endblock %}
	</body>
</html>

{% addtoblock "custom-css" %}
<link href="https://fonts.googleapis.com/css?family=Raleway:200,400,600,800" rel="stylesheet">
<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/custom-LLL.css' %}" rel="stylesheet" type="text/css">
<link rel="shortcut icon" href="{% static 'images/favicon.ico' %}">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
{% endaddtoblock %}

{% addtoblock "custom-js" %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://fastcdn.org/FitText/1.2/jquery.fittext.js"></script>
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<script>
  $(document).ready( function() {
		$("h2").fitText(1.2, { maxFontSize: '45px' });
		$("h3").fitText(1, { maxFontSize: '36px' });
		$("h1").fitText(0.9, { maxFontSize: '60px' });

		$("#content").on('click', function() {
			if ($(window).width() < 800 && $("#content").hasClass("blur")) $(".navbar-toggle").trigger("click");
		});

		// Creates blur effect in the background when the menu icon is clicked on mobile
		$(".navbar-toggle").on("click", function() {
			if ($("#content").hasClass("blur")) {
				$("#content").removeClass("blur");
			} else {
				$("#content").addClass("blur");
			}
    });

		// Setup by device and scroll: if start position is not on top, create background for navbar
		if ($(window).width() < 800) $("#myNavbar").css('opacity', '1');
		if ($(window).scrollTop() > 50) {
			$("#navbar").css('background-position', 'left 0px');
			$("#scrollToTop").css('opacity', '1');
			$("#myNavbar").css('opacity', '1');
		}

		// Create navbar background when scrolled
		$(window).scroll( function() {
	    if($(this).scrollTop() > 50 || $(document).scrollTop() > 50) {
        $("#navbar").css('background-position', 'left 0px');
				$("#myNavbar").css('opacity', '1');
				$("#scrollToTop").css('opacity', '1');
	    } else {
        $("#navbar").css('background-position', 'left -300px');
				if ($(window).width() > 800) $("#myNavbar").css('opacity', '0');
				$("#scrollToTop").css('opacity', '0');
	    }
    });

		// When header is clicked, scroll to top
		$("#scrollToTop, #logo").on('click', function(event) {
			event.preventDefault();
			$('html, body').animate({
				scrollTop: 0
			}, 800, function() {
			});
		});

		// Select all links with hashes
		$(document).on("click", "a[href*='#']", function (event) {
				if ($(window).width() < 800 && $("#content").hasClass("blur")) $(".navbar-toggle").trigger("click");
		    if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '')
		      	&&
		      	location.hostname == this.hostname) {

		      var target = $(this.hash);
		      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
		      if (target.length) {
		        event.preventDefault();
		        $('html, body').animate({
		          scrollTop: target.offset().top - 100
		        }, 1000, function() { });
		      }
		    }
		  });
  });
</script>

{% endaddtoblock %}
